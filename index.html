<!DOCTYPE html>
<html lang="en">
  <body>
    <div id="app"></div>
    <script type="module">
      import {
        createApp,
        computed,
        ref,
      } from "https://unpkg.com/vue@3/dist/vue.esm-browser.js";
      const App = {
        data() {
          return {
            loading: false,
            products: [],
          };
        },
        computed: {
          numberOfProducts() {
            return this.products.length;
          },
        },
        methods: {
          async fetchProducts() {
            const res = await fetch(
              "https://dummyjson.com/products?limit=10000"
            );
            const data = await res.json();
            this.products = data.products;
          },
        },
        async created() {
          this.loading = true;
          await this.fetchProducts();
          this.loading = false;
        },
        template: `
            <div v-if="loading">loading...</div>
            <div v-else>
                <h1>Products ({{numberOfProducts}})</h1>
                <ul>
                    <li v-for="product in products" :key="product.id" >{{ product.title }}</li>
                </ul>
            </div>
            `,
      };

      createApp(App).mount("#app");
    </script>
  </body>
</html>
